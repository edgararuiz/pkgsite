# write-reference works

    Code
      dir(temp_reference)
    Output
       [1] "index.qmd"         "llm_classify.qmd"  "llm_custom.qmd"   
       [4] "llm_extract.qmd"   "llm_sentiment.qmd" "llm_summarize.qmd"
       [7] "llm_translate.qmd" "llm_use.qmd"       "llm_verify.qmd"   
      [10] "reviews.qmd"      

---

    Code
      readLines(fs::path(temp_reference, "index.qmd"))
    Output
       [1] "---"                                                                                    
       [2] "title: Package index"                                                                   
       [3] "toc: false"                                                                             
       [4] "---"                                                                                    
       [5] ""                                                                                       
       [6] "[llm_classify()](llm_classify.qmd) [llm_vec_classify()](llm_classify.qmd)"              
       [7] ""                                                                                       
       [8] ""                                                                                       
       [9] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Categorize data as one of options given"            
      [10] ""                                                                                       
      [11] "[llm_custom()](llm_custom.qmd) [llm_vec_custom()](llm_custom.qmd)"                      
      [12] ""                                                                                       
      [13] ""                                                                                       
      [14] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a custom prompt to the LLM"                    
      [15] ""                                                                                       
      [16] "[llm_extract()](llm_extract.qmd) [llm_vec_extract()](llm_extract.qmd)"                  
      [17] ""                                                                                       
      [18] ""                                                                                       
      [19] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extract entities from text"                         
      [20] ""                                                                                       
      [21] "[llm_sentiment()](llm_sentiment.qmd) [llm_vec_sentiment()](llm_sentiment.qmd)"          
      [22] ""                                                                                       
      [23] ""                                                                                       
      [24] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sentiment analysis"                                 
      [25] ""                                                                                       
      [26] "[llm_summarize()](llm_summarize.qmd) [llm_vec_summarize()](llm_summarize.qmd)"          
      [27] ""                                                                                       
      [28] ""                                                                                       
      [29] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Summarize text"                                     
      [30] ""                                                                                       
      [31] "[llm_translate()](llm_translate.qmd) [llm_vec_translate()](llm_translate.qmd)"          
      [32] ""                                                                                       
      [33] ""                                                                                       
      [34] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Translates text to a specific language"             
      [35] ""                                                                                       
      [36] "[llm_use()](llm_use.qmd)"                                                               
      [37] ""                                                                                       
      [38] ""                                                                                       
      [39] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specify the model to use"                           
      [40] ""                                                                                       
      [41] "[llm_verify()](llm_verify.qmd) [llm_vec_verify()](llm_verify.qmd)"                      
      [42] ""                                                                                       
      [43] ""                                                                                       
      [44] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Verify if a statement about the text is true or not"
      [45] ""                                                                                       
      [46] "[()](m_backend_submit.qmd)"                                                             
      [47] ""                                                                                       
      [48] ""                                                                                       
      [49] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"                                                   
      [50] ""                                                                                       
      [51] "[reviews()](reviews.qmd)"                                                               
      [52] ""                                                                                       
      [53] ""                                                                                       
      [54] "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mini reviews data set"                              
      [55] ""                                                                                       

---

    Code
      readLines(fs::path(temp_reference, "llm_classify.qmd"))
    Output
       [1] "---"                                                                                                                                                                               
       [2] "title: \"Categorize data as one of options given\""                                                                                                                                
       [3] "execute:"                                                                                                                                                                          
       [4] "  eval: true"                                                                                                                                                                      
       [5] "  freeze: true"                                                                                                                                                                    
       [6] "---"                                                                                                                                                                               
       [7] ""                                                                                                                                                                                  
       [8] "## llm_classify"                                                                                                                                                                   
       [9] ""                                                                                                                                                                                  
      [10] "## Description"                                                                                                                                                                    
      [11] "Use a Large Language Model (LLM) to classify the provided text as one of the options provided via the 'labels' argument."                                                          
      [12] ""                                                                                                                                                                                  
      [13] ""                                                                                                                                                                                  
      [14] "## Usage"                                                                                                                                                                          
      [15] "```r"                                                                                                                                                                              
      [16] "llm_classify("                                                                                                                                                                     
      [17] "  .data,"                                                                                                                                                                          
      [18] "  col,"                                                                                                                                                                            
      [19] "  labels,"                                                                                                                                                                         
      [20] "  pred_name = \".classify\","                                                                                                                                                      
      [21] "  additional_prompt = \"\""                                                                                                                                                        
      [22] ")"                                                                                                                                                                                 
      [23] ""                                                                                                                                                                                  
      [24] "llm_vec_classify(x, labels, additional_prompt = \"\", preview = FALSE)"                                                                                                            
      [25] "```"                                                                                                                                                                               
      [26] ""                                                                                                                                                                                  
      [27] "## Arguments"                                                                                                                                                                      
      [28] "|Arguments|Description|"                                                                                                                                                           
      [29] "|---|---|"                                                                                                                                                                         
      [30] "| .data | A 'data.frame' or 'tbl' object that contains the text to be analyzed |"                                                                                                  
      [31] "| col | The name of the field to analyze, supports 'tidy-eval' |"                                                                                                                  
      [32] "| labels | A character vector with at least 2 labels to classify the text as |"                                                                                                    
      [33] "| pred_name | A character vector with the name of the new column where the prediction will be placed |"                                                                            
      [34] "| additional_prompt | Inserts this text into the prompt sent to the LLM |"                                                                                                         
      [35] "| x | A vector that contains the text to be analyzed |"                                                                                                                            
      [36] "| preview | It returns the R call that would have been used to run the prediction. It only returns the first record in 'x'. Defaults to 'FALSE' Applies to vector function only. |"
      [37] ""                                                                                                                                                                                  
      [38] ""                                                                                                                                                                                  
      [39] "## Value"                                                                                                                                                                          
      [40] "'llm_classify' returns a 'data.frame' or 'tbl' object. 'llm_vec_classify' returns a vector that is the same length as 'x'."                                                        
      [41] ""                                                                                                                                                                                  
      [42] ""                                                                                                                                                                                  
      [43] ""                                                                                                                                                                                  
      [44] ""                                                                                                                                                                                  
      [45] ""                                                                                                                                                                                  
      [46] ""                                                                                                                                                                                  
      [47] "## Examples"                                                                                                                                                                       
      [48] "```r"                                                                                                                                                                              
      [49] ""                                                                                                                                                                                  
      [50] ""                                                                                                                                                                                  
      [51] "library(mall)"                                                                                                                                                                     
      [52] ""                                                                                                                                                                                  
      [53] "data(\"reviews\")"                                                                                                                                                                 
      [54] ""                                                                                                                                                                                  
      [55] "llm_use(\"ollama\", \"llama3.2\", seed = 100, .silent = TRUE)"                                                                                                                     
      [56] ""                                                                                                                                                                                  
      [57] "llm_classify(reviews, review, c(\"appliance\", \"computer\"))"                                                                                                                     
      [58] ""                                                                                                                                                                                  
      [59] "# Use 'pred_name' to customize the new column's name"                                                                                                                              
      [60] "llm_classify("                                                                                                                                                                     
      [61] "  reviews,"                                                                                                                                                                        
      [62] "  review,"                                                                                                                                                                         
      [63] "  c(\"appliance\", \"computer\"),"                                                                                                                                                 
      [64] "  pred_name = \"prod_type\""                                                                                                                                                       
      [65] ")"                                                                                                                                                                                 
      [66] ""                                                                                                                                                                                  
      [67] "# Pass custom values for each classification"                                                                                                                                      
      [68] "llm_classify(reviews, review, c(\"appliance\" ~ 1, \"computer\" ~ 2))"                                                                                                             
      [69] ""                                                                                                                                                                                  
      [70] "# For character vectors, instead of a data frame, use this function"                                                                                                               
      [71] "llm_vec_classify("                                                                                                                                                                 
      [72] "  c(\"this is important!\", \"just whenever\"),"                                                                                                                                   
      [73] "  c(\"urgent\", \"not urgent\")"                                                                                                                                                   
      [74] ")"                                                                                                                                                                                 
      [75] ""                                                                                                                                                                                  
      [76] "# To preview the first call that will be made to the downstream R function"                                                                                                        
      [77] "llm_vec_classify("                                                                                                                                                                 
      [78] "  c(\"this is important!\", \"just whenever\"),"                                                                                                                                   
      [79] "  c(\"urgent\", \"not urgent\"),"                                                                                                                                                  
      [80] "  preview = TRUE"                                                                                                                                                                  
      [81] ")"                                                                                                                                                                                 
      [82] ""                                                                                                                                                                                  
      [83] ""                                                                                                                                                                                  
      [84] "```"                                                                                                                                                                               

---

    Code
      readLines(fs::path(temp_reference, "llm_use.qmd"))
    Output
       [1] "---"                                                                                                                                                                                                                                                                                                 
       [2] "title: \"Specify the model to use\""                                                                                                                                                                                                                                                                 
       [3] "execute:"                                                                                                                                                                                                                                                                                            
       [4] "  eval: true"                                                                                                                                                                                                                                                                                        
       [5] "  freeze: true"                                                                                                                                                                                                                                                                                      
       [6] "---"                                                                                                                                                                                                                                                                                                 
       [7] ""                                                                                                                                                                                                                                                                                                    
       [8] "## llm_use"                                                                                                                                                                                                                                                                                          
       [9] ""                                                                                                                                                                                                                                                                                                    
      [10] "## Description"                                                                                                                                                                                                                                                                                      
      [11] "Allows us to specify the back-end provider, model to use during the current R session"                                                                                                                                                                                                               
      [12] ""                                                                                                                                                                                                                                                                                                    
      [13] ""                                                                                                                                                                                                                                                                                                    
      [14] "## Usage"                                                                                                                                                                                                                                                                                            
      [15] "```r"                                                                                                                                                                                                                                                                                                
      [16] "llm_use("                                                                                                                                                                                                                                                                                            
      [17] "  backend = NULL,"                                                                                                                                                                                                                                                                                   
      [18] "  model = NULL,"                                                                                                                                                                                                                                                                                     
      [19] "  ...,"                                                                                                                                                                                                                                                                                              
      [20] "  .silent = FALSE,"                                                                                                                                                                                                                                                                                  
      [21] "  .cache = NULL,"                                                                                                                                                                                                                                                                                    
      [22] "  .force = FALSE"                                                                                                                                                                                                                                                                                    
      [23] ")"                                                                                                                                                                                                                                                                                                   
      [24] "```"                                                                                                                                                                                                                                                                                                 
      [25] ""                                                                                                                                                                                                                                                                                                    
      [26] "## Arguments"                                                                                                                                                                                                                                                                                        
      [27] "|Arguments|Description|"                                                                                                                                                                                                                                                                             
      [28] "|---|---|"                                                                                                                                                                                                                                                                                           
      [29] "| backend | The name of an supported back-end provider. Currently only 'ollama' is supported. |"                                                                                                                                                                                                     
      [30] "| model | The name of model supported by the back-end provider |"                                                                                                                                                                                                                                    
      [31] "| ... | Additional arguments that this function will pass down to the integrating function. In the case of Ollama, it will pass those arguments to 'ollamar::chat()'. |"                                                                                                                             
      [32] "| .silent | Avoids console output |"                                                                                                                                                                                                                                                                 
      [33] "| .cache | The path to save model results, so they can be re-used if the same operation is ran again. To turn off, set this argument to an empty character: '\"\"'. It defaults to a temp folder. If this argument is left 'NULL' when calling this function, no changes to the path will be made. |"
      [34] "| .force | Flag that tell the function to reset all of the settings in the R session |"                                                                                                                                                                                                              
      [35] ""                                                                                                                                                                                                                                                                                                    
      [36] ""                                                                                                                                                                                                                                                                                                    
      [37] "## Value"                                                                                                                                                                                                                                                                                            
      [38] "A 'mall_session' object"                                                                                                                                                                                                                                                                             
      [39] ""                                                                                                                                                                                                                                                                                                    
      [40] ""                                                                                                                                                                                                                                                                                                    
      [41] ""                                                                                                                                                                                                                                                                                                    
      [42] ""                                                                                                                                                                                                                                                                                                    
      [43] ""                                                                                                                                                                                                                                                                                                    
      [44] ""                                                                                                                                                                                                                                                                                                    
      [45] "## Examples"                                                                                                                                                                                                                                                                                         
      [46] "```{r}"                                                                                                                                                                                                                                                                                              
      [47] ""                                                                                                                                                                                                                                                                                                    
      [48] "print(mtcars)"                                                                                                                                                                                                                                                                                       
      [49] ""                                                                                                                                                                                                                                                                                                    
      [50] "```"                                                                                                                                                                                                                                                                                                 

---

    Code
      readLines(fs::path(temp_reference, "llm_extract.qmd"))
    Output
       [1] "---"                                                                                                                                                                                                                                                                                                            
       [2] "title: \"Extract entities from text\""                                                                                                                                                                                                                                                                          
       [3] "execute:"                                                                                                                                                                                                                                                                                                       
       [4] "  eval: true"                                                                                                                                                                                                                                                                                                   
       [5] "  freeze: true"                                                                                                                                                                                                                                                                                                 
       [6] "---"                                                                                                                                                                                                                                                                                                            
       [7] ""                                                                                                                                                                                                                                                                                                               
       [8] "## llm_extract"                                                                                                                                                                                                                                                                                                 
       [9] ""                                                                                                                                                                                                                                                                                                               
      [10] "## Description"                                                                                                                                                                                                                                                                                                 
      [11] "Use a Large Language Model (LLM) to extract specific entity, or entities, from the provided text"                                                                                                                                                                                                               
      [12] ""                                                                                                                                                                                                                                                                                                               
      [13] ""                                                                                                                                                                                                                                                                                                               
      [14] "## Usage"                                                                                                                                                                                                                                                                                                       
      [15] "```r"                                                                                                                                                                                                                                                                                                           
      [16] "llm_extract("                                                                                                                                                                                                                                                                                                   
      [17] "  .data,"                                                                                                                                                                                                                                                                                                       
      [18] "  col,"                                                                                                                                                                                                                                                                                                         
      [19] "  labels,"                                                                                                                                                                                                                                                                                                      
      [20] "  expand_cols = FALSE,"                                                                                                                                                                                                                                                                                         
      [21] "  additional_prompt = \"\","                                                                                                                                                                                                                                                                                    
      [22] "  pred_name = \".extract\""                                                                                                                                                                                                                                                                                     
      [23] ")"                                                                                                                                                                                                                                                                                                              
      [24] ""                                                                                                                                                                                                                                                                                                               
      [25] "llm_vec_extract(x, labels = c(), additional_prompt = \"\", preview = FALSE)"                                                                                                                                                                                                                                    
      [26] "```"                                                                                                                                                                                                                                                                                                            
      [27] ""                                                                                                                                                                                                                                                                                                               
      [28] "## Arguments"                                                                                                                                                                                                                                                                                                   
      [29] "|Arguments|Description|"                                                                                                                                                                                                                                                                                        
      [30] "|---|---|"                                                                                                                                                                                                                                                                                                      
      [31] "| .data | A 'data.frame' or 'tbl' object that contains the text to be analyzed |"                                                                                                                                                                                                                               
      [32] "| col | The name of the field to analyze, supports 'tidy-eval' |"                                                                                                                                                                                                                                               
      [33] "| labels | A vector with the entities to extract from the text |"                                                                                                                                                                                                                                               
      [34] "| expand_cols | If multiple 'labels' are passed, this is a flag that tells the function to create a new column per item in 'labels'. If 'labels' is a named vector, this function will use those names as the new column names, if not, the function will use a sanitized version of the content as the name. |"
      [35] "| additional_prompt | Inserts this text into the prompt sent to the LLM |"                                                                                                                                                                                                                                      
      [36] "| pred_name | A character vector with the name of the new column where the prediction will be placed |"                                                                                                                                                                                                         
      [37] "| x | A vector that contains the text to be analyzed |"                                                                                                                                                                                                                                                         
      [38] "| preview | It returns the R call that would have been used to run the prediction. It only returns the first record in 'x'. Defaults to 'FALSE' Applies to vector function only. |"                                                                                                                             
      [39] ""                                                                                                                                                                                                                                                                                                               
      [40] ""                                                                                                                                                                                                                                                                                                               
      [41] "## Value"                                                                                                                                                                                                                                                                                                       
      [42] "'llm_extract' returns a 'data.frame' or 'tbl' object. 'llm_vec_extract' returns a vector that is the same length as 'x'."                                                                                                                                                                                       
      [43] ""                                                                                                                                                                                                                                                                                                               
      [44] ""                                                                                                                                                                                                                                                                                                               
      [45] ""                                                                                                                                                                                                                                                                                                               
      [46] ""                                                                                                                                                                                                                                                                                                               
      [47] ""                                                                                                                                                                                                                                                                                                               
      [48] ""                                                                                                                                                                                                                                                                                                               
      [49] "## Examples"                                                                                                                                                                                                                                                                                                    
      [50] "```r"                                                                                                                                                                                                                                                                                                           
      [51] ""                                                                                                                                                                                                                                                                                                               
      [52] ""                                                                                                                                                                                                                                                                                                               
      [53] "library(mall)"                                                                                                                                                                                                                                                                                                  
      [54] ""                                                                                                                                                                                                                                                                                                               
      [55] "data(\"reviews\")"                                                                                                                                                                                                                                                                                              
      [56] ""                                                                                                                                                                                                                                                                                                               
      [57] "llm_use(\"ollama\", \"llama3.2\", seed = 100, .silent = TRUE)"                                                                                                                                                                                                                                                  
      [58] ""                                                                                                                                                                                                                                                                                                               
      [59] "# Use 'labels' to let the function know what to extract"                                                                                                                                                                                                                                                        
      [60] "llm_extract(reviews, review, labels = \"product\")"                                                                                                                                                                                                                                                             
      [61] ""                                                                                                                                                                                                                                                                                                               
      [62] "# Use 'pred_name' to customize the new column's name"                                                                                                                                                                                                                                                           
      [63] "llm_extract(reviews, review, \"product\", pred_name = \"prod\")"                                                                                                                                                                                                                                                
      [64] ""                                                                                                                                                                                                                                                                                                               
      [65] "# Pass a vector to request multiple things, the results will be pipe delimeted"                                                                                                                                                                                                                                 
      [66] "# in a single column"                                                                                                                                                                                                                                                                                           
      [67] "llm_extract(reviews, review, c(\"product\", \"feelings\"))"                                                                                                                                                                                                                                                     
      [68] ""                                                                                                                                                                                                                                                                                                               
      [69] "# To get multiple columns, use 'expand_cols'"                                                                                                                                                                                                                                                                   
      [70] "llm_extract(reviews, review, c(\"product\", \"feelings\"), expand_cols = TRUE)"                                                                                                                                                                                                                                 
      [71] ""                                                                                                                                                                                                                                                                                                               
      [72] "# Pass a named vector to set the resulting column names"                                                                                                                                                                                                                                                        
      [73] "llm_extract("                                                                                                                                                                                                                                                                                                   
      [74] "  .data = reviews,"                                                                                                                                                                                                                                                                                             
      [75] "  col = review,"                                                                                                                                                                                                                                                                                                
      [76] "  labels = c(prod = \"product\", feels = \"feelings\"),"                                                                                                                                                                                                                                                        
      [77] "  expand_cols = TRUE"                                                                                                                                                                                                                                                                                           
      [78] ")"                                                                                                                                                                                                                                                                                                              
      [79] ""                                                                                                                                                                                                                                                                                                               
      [80] "# For character vectors, instead of a data frame, use this function"                                                                                                                                                                                                                                            
      [81] "llm_vec_extract(\"bob smith, 123 3rd street\", c(\"name\", \"address\"))"                                                                                                                                                                                                                                       
      [82] ""                                                                                                                                                                                                                                                                                                               
      [83] "# To preview the first call that will be made to the downstream R function"                                                                                                                                                                                                                                     
      [84] "llm_vec_extract("                                                                                                                                                                                                                                                                                               
      [85] "  \"bob smith, 123 3rd street\","                                                                                                                                                                                                                                                                               
      [86] "  c(\"name\", \"address\"),"                                                                                                                                                                                                                                                                                    
      [87] "  preview = TRUE"                                                                                                                                                                                                                                                                                               
      [88] ")"                                                                                                                                                                                                                                                                                                              
      [89] ""                                                                                                                                                                                                                                                                                                               
      [90] ""                                                                                                                                                                                                                                                                                                               
      [91] "```"                                                                                                                                                                                                                                                                                                            

